"use strict";(self.webpackChunktopology_designable=self.webpackChunktopology_designable||[]).push([[241],{89231:function(M,u,e){e.r(u),e.d(u,{default:function(){return C}});var S=e(15009),g=e.n(S),z=e(99289),b=e.n(z),k=e(5574),P=e.n(k),v=e(67294),I=e(96638),y=e(13104),o=e(17128),D="var(--topology-editor-background-normal)",E=[{name:"device",label:"\u8BBE\u5907",items:[{id:"database-audit",component:"topology-device",size:{height:74,width:74},componentProps:{borderStyle:"solid",label:"\u6570\u636E\u5E93\u5BA1\u8BA1",icon:o.g.databaseAudit,background:"white"}},{id:"switch",component:"topology-device",size:{height:74,width:74},componentProps:{borderStyle:"solid",label:"\u4EA4\u6362\u673A",icon:o.g.switch,background:"white"}},{id:"firewall",component:"topology-device",size:{height:74,width:74},componentProps:{borderStyle:"solid",label:"\u9632\u706B\u5899",icon:o.g.firewall,background:"white"}},{id:"firewall-ip",component:"topology-device",size:{height:74,width:74},componentProps:{borderStyle:"solid",label:"IP\u5C01\u7981",icon:o.g.firewallIp,background:"white"}},{id:"china-unicom",component:"topology-device",size:{height:74,width:74},componentProps:{borderStyle:"solid",label:"\u8054\u901A\u4E13\u7EBF",icon:o.g.chinaUnicom,background:"white"}},{id:"china-mobile",component:"topology-device",size:{height:74,width:74},componentProps:{borderStyle:"solid",label:"\u79FB\u52A8\u4E13\u7EBF",icon:o.g.chinaMobile,background:"white"}},{id:"internet",component:"topology-device",size:{height:74,width:74},componentProps:{borderStyle:"solid",label:"\u4E92\u8054\u7F51",icon:o.g.internet,background:"white"}},{id:"ddos",component:"topology-device",size:{height:74,width:74},componentProps:{borderStyle:"solid",label:"\u6297DDOs\u653B\u51FB",icon:o.g.ddos,background:"white"}},{id:"web",component:"topology-device",size:{height:74,width:74},componentProps:{borderStyle:"solid",label:"Web\u5E94\u7528",icon:o.g.web,background:"white"}},{id:"bank",component:"topology-device",size:{height:74,width:74},componentProps:{borderStyle:"none",label:"\u94F6\u884C",icon:o.g.bank,background:"transparent"}},{id:"government",component:"topology-device",size:{height:74,width:74},componentProps:{borderStyle:"none",label:"\u653F\u5E9C",icon:o.g.government,background:"transparent"}},{id:"police",component:"topology-device",size:{height:74,width:74},componentProps:{borderStyle:"none",label:"\u516C\u5B89",icon:o.g.police,background:"transparent"}},{id:"cloud",component:"topology-downlink",size:{height:74,width:74},componentProps:{borderStyle:"dashed",label:"\u4E91\u5E73\u53F0",icon:o.g.cloud,background:D}}]},{name:"other",label:"\u5176\u4ED6",items:[{id:"circle",label:"\u5706\u5F62",component:"topology-circle",embeddable:!0,componentProps:{borderStyle:"solid",background:"var(--topology-editor-background-normal)"},size:{height:74,width:74}},{id:"rect-dashed-normal",label:"\u6B63\u65B9\u5F62",component:"topology-rect",embeddable:!0,componentProps:{borderStyle:"dashed",background:"var(--topology-editor-background-normal)"},size:{height:74,width:74}},{id:"rect-solid-white",label:"\u6B63\u65B9\u5F62",component:"topology-rect",embeddable:!0,componentProps:{borderStyle:"solid",background:"white"},size:{height:74,width:74}},{id:"lightning",label:"\u95EA\u7535",icon:"lightning",component:"topology-lightning",size:{height:48,width:48}},{id:"line",label:"\u7EBF\u6761",component:"topology-line",componentProps:{stroke:"var(--topology-editor-normal-color)",strokeWidth:1},size:{height:300,width:20},rowSpan:2},{id:"larger-label",label:"\u5927\u6587\u672C",component:"topology-label",componentProps:{label:"\u5927\u6587\u672C",type:"title",layout:"vertical",textAlign:"center",color:"var(--topology-editor-normal-color)"},size:{height:240,width:60},columnSpan:2},{id:"label",label:"\u666E\u901A\u6587\u672C",component:"topology-label",componentProps:{label:"\u666E\u901A\u6587\u672C",type:"normal",layout:"horizontal",textAlign:"center",color:"var(--topology-editor-normal-color)"},size:{height:40,width:100}}]}],R=e(85893);function j(a){var n=document.createElement("a");n.download="topology.json",n.rel="noopener";var p=URL.createObjectURL(new Blob(a.split("")));n.href=p,n.click()}function A(a){var n=document.createElement("a");n.download="topology.png",n.href=a,n.click()}var C=function(){var a=(0,v.useRef)(),n=(0,I.Z)({size:{height:666,width:1888},materials:E,value:void 0}),p=P()(n,2),h=p[0],O=p[1],x=function(){var c=b()(g()().mark(function l(r){var i,s,m,d,w,f;return g()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(i=a.current,r!=="json"){t.next=14;break}return t.next=4,i.getJsonData();case 4:return m=t.sent,t.next=7,i.getImageData();case 7:if(d=t.sent,(s=m.cells)!==null&&s!==void 0&&s.length){t.next=10;break}throw Error("[topology] \u8D44\u6E90\u4E3A\u7A7A");case 10:w={id:"111",type:1,size:{height:h.size.height,width:h.size.width},version:"1.0",description:"",thumb:d,graph:m},j(JSON.stringify(w)),t.next=19;break;case 14:if(r!=="image"){t.next=19;break}return t.next=17,i.getImageData();case 17:f=t.sent,A(f);case 19:case"end":return t.stop()}},l)}));return function(r){return c.apply(this,arguments)}}(),B=function(){var c=b()(g()().mark(function l(r){var i,s;return g()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:if(r!=null&&r.graph){d.next=2;break}throw Error("[graph] \u5BFC\u5165\u7684\u6570\u636E\u683C\u5F0F\u6709\u8BEF");case 2:s=a.current,(i=s.getInstance())===null||i===void 0||i.fromJSON(r.graph,{silent:!1});case 4:case"end":return d.stop()}},l)}));return function(r){return c.apply(this,arguments)}}(),J=function(l){console.log("editor change",l)};return(0,v.useEffect)(function(){var c=e(96224);O({value:c.graph})},[]),(0,R.jsx)(y.ML,{ref:a,style:{height:800},materials:h.materials,value:h.value,iconMap:o.Z,propsPanelSchemaMap:y.CB,size:h.size,toolbar:{export:!0,import:!0},onExport:x,onImport:B,onChange:J})}}}]);
